<html>
  <head>
    <title>pycobertura report</title>
    <meta charset="UTF-8">
    <style>
{% include 'normalize.css' %}
{% include 'skeleton.css' %}
.red {color: red}
.green {color: green}
.hit {background-color: #EAFFEA}
.miss {background-color: #FFECEC}
pre {line-height: 1.2}
table.code pre {margin: 0;}
table.code td {padding: 0; border: 0;}
table.code td.lineno {text-align: right;}
table.code td.lineno pre {margin-right: 1rem;}
.legend dd {margin-left: 70px;}
.legend dt {float: left; width: 60px; text-align: center;}
.legend dt code {line-height: initial; border: none; background: none;}
    </style>
  </head>
  <body>
    <div class="container">
      <table class="u-full-width">
        <thead>
{%- for key in lines.keys() %}  
          <tr>
{%- if key!="Missing" %}          
            <th>key</th>
{%- elif show_source and show_missing %}
            <th>Missing</th>
{%- endif %}
          </tr>
{%- endfor %}
        </thead>
        <tbody>
{%- for file_index in range(lines.values()|length) %}
{%- for key, vals in lines.items() %} 
          <tr>
{%- if key in ("Stmts", "Cover") %}
            <td>{{ vals[file_index] }}</td>   
{%- elif key == "Filename" %}         
            <td><a href="#{{ vals[file_index] }}">{{ vals[file_index] }}</a></td>
{%- elif key == "Miss" %}              
            <td><span{% if vals[file_index] | is_not_equal_to_dash %} class="{{ vals[file_index] | misses_color }}"{% endif %}>{{ vals[file_index] }}</span></td>
{%- elif key == "Missing" and show_source and show_missing %}
            <td>
{%- for missed_line in vals[file_index] %}
            {%- if not loop.first %}, {% endif %}<span class="{{ missed_line | misses_color }}">{{ missed_line }}</span>
{%- endfor %}
            </td>
{%- endif %}
          </tr>
{%- endfor %}
{%- endfor %}
        </tbody>
        <tfoot>
{%- for key, vals in footer.items() %} 
          <tr>
{%- if key in ("Filename", "Stmts", "Cover") %}          
            <td>{{ vals }}</td>
{%- elif key=="Miss" %}  
            <td><span{% if vals | is_not_equal_to_dash %} class="{{ vals | misses_color }}"{% endif %}>{{ vals }}</span></td>
{%- elif key=="Missing" and show_source and show_missing %}
            <td></td>
{%- endif %}
{%- endfor %}
          </tr>
        </tfoot>
      </table>
{%- if show_source %}
{%- from 'macro.source.jinja2' import render_source -%}
<div class="legend">
  <dl>
    <dt><code>code</code></dt><dd>coverage unchanged</dd>
    <dt class="hit"><code>code</code></dt><dd>coverage increased</dd>
    <dt class="miss"><code>code</code></dt><dd>coverage decreased</dd>
    <dt><code>+</code></dt><dd>line added or modified</dd>
  </dl>
</div>

{%- for filename, source_hunks in sources %}
<h4 id="{{ filename }}">{{ filename }}</h4>
{%- for hunk in source_hunks %}
{{ render_source(hunk) }}
{%- endfor %}
{%- endfor %}
{%- endif %}
    </div>
  </body>
</html>
